<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日月地系</title>
    <script src="./../build/three.js"></script>
    <script src="./../examples/js/controls/OrbitControls.js"></script>
    <script src="./../examples/js/libs/stats.min.js"></script>
</head>
<body>
    <script>
        var renderer;
        function initRender()
        {
            renderer = new THREE.WebGLRenderer({antialias:true});
            renderer.setSize(window.innerWidth,window.innerHeight);
            document.body.appendChild(renderer.domElement);
        }

        var scene;
        function initScene()
        {
            scene = new THREE.Scene();
        }

        var camera;
        function initCamera()
        {
            camera = new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1000);
            camera.position.set(0,100,0);
            camera.lookAt(new THREE.Vector3(0,0,0));
        }

        var light,midLight;
        function initLight()
        {
            light = new THREE.PointLight(0xffffff,3);
            scene.add(light);//3为光照强度
            midLight = new THREE.PointLight(0xffffff,3);
            scene.add(midLight);
        }

        var sun,earth,moon;
        var objects = [];
        function initModel()
        {
            //太阳
            var solarSystem = new THREE.Object3D();
            scene.add(solarSystem);
            objects.push(solarSystem);

            var Geometry = new THREE.SphereGeometry(1,6,6);
            var sunMaterial = new THREE.MeshPhongMaterial({emissive:0xffff00});
            sun = new THREE.Mesh(Geometry,sunMaterial);
            sun.scale.set(6,6,6);
            solarSystem.add(sun);
            objects.push(sun);
            //地球
            var earthOrbit = new THREE.Object3D();
            earthOrbit.position.x = 40;
            solarSystem.add(earthOrbit);
            objects.push(earthOrbit);

            var earthMaterial = new THREE.MeshPhongMaterial({color:0x2233ff,emissive:0x112244});
            earth = new THREE.Mesh(Geometry,earthMaterial);
            earth.scale.set(3,3,3);
            earthOrbit.add(earth);
            objects.push(earth);
            //月亮
            var moonOrbit = new THREE.Object3D();
            moonOrbit.position.x = 7;
            earthOrbit.add(moonOrbit);

            var moonMaterial = new THREE.MeshPhongMaterial({color:"silver",emissive:0x222222});
            moon = new THREE.Mesh(Geometry,moonMaterial);
            moon.scale.set(1,1,1);
            moonOrbit.add(moon);
            objects.push(moon);
        }

        function render()
        {
            renderer.render(scene,camera);
        }

        var stats;
        function initStats()
        {
            stats = new Stats();
            document.body.appendChild(stats.dom);
        }

        var controls;
        function initControls()
        {
            controls = new THREE.OrbitControls(camera,renderer.domElement);
        }

        function onWindowResize()
        {
            camera.aspect = window.innerWidth/window.innerHeight;
            camera.updateProjectionMatrix();
            render();
            renderer.setSize(window.innerWidth,window.innerHeight);
        }

        function animate()
        {
            render();
            stats.update();

            objects.forEach((obj) => {
                obj.rotation.y += 0.01;
            });
            controls.update();
            requestAnimationFrame(animate);
        }
        function draw()
        {
            initRender();
            initScene();
            initCamera();
            initLight();
            initModel();
            initStats();
            initControls();
            animate();
            window.onresize = onWindowResize;
        }
        draw();
    </script>
</body>
</html>