<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>美丽的字体</title>
    <script src="./../build/three.js"></script>
    <script src="./../examples/js/controls/OrbitControls.js"></script>
    <script src="./../examples/js/loaders/FontLoader.js"></script>
    <script src="./../examples/js/libs/stats.min.js"></script>
    <script src="./../examples/js/geometries/TextGeometry.js"></script>
</head>
<body>
    <script>
        var renderer;
        function initRender()
        {
            renderer = new THREE.WebGLRenderer({antialias:true});
            renderer.setSize(window.innerWidth,window.innerHeight);
            document.body.appendChild(renderer.domElement);
        }

        var camera;
        function initCamera()
        {
            camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,10000);
            camera.position.set(0,0,400);
        }

        var scene;
        function initScene()
        {
            scene = new THREE.Scene();
        }

        var light;
        function initLight()
        {
            scene.add(new THREE.AmbientLight(0x404040));
            light = new THREE.DirectionalLight(0xffffff);
            scene.add(light);
        }

        var fontModel;
        function initModel()
        {
            var font;
            var loader = new THREE.FontLoader();//这个是不是要引入呀？
            //比如这个gentilis_regular.typeface.json，我们知道他是fonts下的一个文件，我们这个html得路径是这里 self/html下的
            //然后我们需要得gentilis_regular.typeface.json 这个文件 在examples/fonts
            //所以我们需要先进入examples目录
            //.. 表示往外翻一层 现在我们处于self/html/字体.html
            //哪个 在当前路径(./) 往外面翻一层(../)   ./../表示现在处于了self这个目录  ./../../这个表示处于self的父目录
            //父目录 下存在build examples self 这三个 我们现在处于父目录 哪个是不是可以 ./../../examples 这样就进入了examples
            //哪个json后缀表示json文件 一种数据格式文件 可视化那边经常用这个
            loader.load("./../examples/fonts/gentilis_regular.typeface.json",function (res)
            {
                font = new THREE.TextGeometry("my baby",{
                    font:res,
                    size:100,
                    height:60
                });

                font.computeBoundingBox();

                var map = new THREE.TextureLoader().load("./../素材/兰州丹霞.png");
                var material = new THREE.MeshLambertMaterial({map:map,side:THREE.DoubleSide});

                fontModel = new THREE.Mesh(font,material);

                //设置位置
                fontModel.position.x = - (font.boundingBox.max.x - font.boundingBox.min.x)/2;
                fontModel.position.y = -50;
                fontModel.position.z = -30;

                scene.add(fontModel);
            });
        }

        //初始化性能插件
        var stats;
        function initStats()
        {
            stats = new Stats();
            document.body.appendChild(stats.dom);
        }

        //用户交互插件 鼠标左键按住旋转，右键按住平移，滚轮缩放
        var controls;
        function initControls()
        {
            controls = new THREE.OrbitControls(camera,renderer.domElement);
        }

        function render()
        {
            renderer.render(scene,camera);
        }

        //窗口变动触发函数,
        function onWindowResize()
        {
    
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            render();
            renderer.setSize(window.innerWidth,window.innerHeight);
        }

        function animate()
        {
            //更新控制器
            controls.update();
            render();

            //更新性能插件
            stats.update();
            requestAnimationFrame(animate);
        }
       
        function draw()
        {
            initRender();
            initScene();
            initCamera();
            initLight();
            initModel();
            initControls();
            initStats();

            animate();
            window.addEventListener("resize",onWindowResize);//你这个函数里面的逻辑有问题，所以导致看不到
        }
        window.onload = draw;
        //大哥 你都没调用 
    </script>
</body>
</html>