<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>啦啦啦</title>
    <script src="./build/three.js"></script>
    <script src="./examples/js/controls/OrbitControls.js"></script>
    <script src="./examples/js/libs/dat.gui.min.js"></script>
</head>
<body>
<script>
    /**
     * @第一步模板
     * 1.渲染器
     * 2.场景
     * 3.相机
     * 4.灯光 可选
     * 5.模型 可选
     * 6.控制器 可选
     * 7.Stats 可选
     * 8.Gui 可选
     * 9.渲染函数
     */

    var width, height, renderer, scene, camera, light, geometry, material, gui, controls, box, BoxGroup, BoxGroup2,
        box2_rotation,sphere,sphere2,plane,BoxGroup_1,BoxGroup_2,BoxGroup_3,sphereMaterial;
    width = window.innerWidth;
    height = window.innerHeight;
    //创建渲染器
    renderer = new THREE.WebGLRenderer({antialias: true});//抗锯齿 可选
    renderer.setClearColor("purple");
    renderer.setSize(width, height);
    document.body.appendChild(renderer.domElement);
    //创建场景
    scene = new THREE.Scene();
    //创建相机
    camera = new THREE.PerspectiveCamera(60, width / height, 1, 1000);
    camera.position.set(0, 20, 40);//人拿着相机的位置
    camera.lookAt(0, 0, 0);//一个人拿着相机对着什么地方拍摄
    //创建光源(平行光)
    light = new THREE.DirectionalLight("#fff");
    light.position.set(200, 300, 400);
    scene.add(light);
    //创建控制器
    controls = new THREE.OrbitControls(camera, renderer.domElement);

    //创建几何
    // function initModel() {
        //创建gui
        gui = new dat.GUI();
        var helper = new THREE.AxesHelper(100);
        scene.add(helper)
        //创建最底下的平面
        var planeGeometry = new THREE.PlaneGeometry(20, 10, 1, 1);//宽、长、横向分段数、纵向分段数
        var planeMaterial = new THREE.MeshStandardMaterial({color: "#ff0000"})
        plane = new THREE.Mesh(planeGeometry, planeMaterial);
        scene.add(plane);
        plane.rotation.x = -0.5 * Math.PI;//数学库 ==》-90°
        //创建柱子
        var boxGeometry = new THREE.BoxGeometry(3, 10, 3)
        var boxMaterial = new THREE.MeshNormalMaterial({});
        box = new THREE.Mesh(boxGeometry, boxMaterial);
        box.position.set(0, 5, 0);
        scene.add(box)
        //创建小球1
        var sphereGeometry = new THREE.SphereGeometry(1.5, 32, 32);
        var sphereMaterial = new THREE.MeshLambertMaterial({color:'aqua',side:THREE.DoubleSide});
        sphere = new THREE.Mesh(sphereGeometry,sphereMaterial);
        scene.add(sphere);
        sphere.position.set(0, 11, 0);
        // 创建斜柱子
        box2_rotation = box.clone();
        box2_rotation.position.set(0, 5.25, 3)
        box2_rotation.rotation.x += Math.PI / 6;
        scene.add(box2_rotation);
        // 创建盒子（一个几何体只能放到一个盒子里面）
        BoxGroup_3 = new THREE.Group();
        BoxGroup_3.add(box2_rotation,sphere,box)
        //BoxGroup_3.position.set(0,0,0);
         scene.add(BoxGroup_3)
  //  }
        //initModel();
     //渲染函数
    renderer.render(scene, camera);
    //什么叫做一帧图片
    //每调用一次，即相当于相机拍摄了一张照片，1秒拍摄了60张照片
    var controls = new THREE.OrbitControls(camera,renderer.domElement);
    function animate() {
        // controls.update();
        renderer.render(scene, camera);
        requestAnimationFrame(animate);//一秒钟调用60次，与电脑的配置有关
    }
    sphere.add(box2_rotation)
    window.onload = animate;
         sphere.add(box2_rotation);
        function animate_s()
        {
            sphere.rotation.x -=0.1;
            renderer.render(scene,camera);
           //  requestAnimationFrame(animate_s);
        }
        function animate_d()
        {
            sphere.rotation.y +=0.1;
            renderer.render(scene,camera);
           // requestAnimationFrame(animate_d);
        }
        function animate_r()
        {
           plane.position.x+=10;
           BoxGroup_3.position.x+=10;
           renderer.render(scene,camera);
        }
        function animate_t()
        {
            BoxGroup_3.rotation.y+=0.1;
           renderer.render(scene,camera);
          // requestAnimationFrame(animate_t);
        }
        function animate_a()
        {
        var sphere2 = new THREE.Mesh(sphereGeometry, sphereMaterial);//复制小球1
         sphere2.position.copy(plane.position);
         sphere2.position.y +=1.5;
         sphere2.position.x +=10;
        scene.add(sphere2);
        }

    /*window.addEventListener("keyup", initEvent);//必须点按

    function initEvent(e)
    {
        if (e.code === "KeyS")
        {
            animate_s()
        }
        if (e.code === "KeyD")
        {
            animate_d()
        }
        if (e.code === "KeyR")
        {
            animate_r()
        }
        if (e.code === "KeyM")
        {
            sphere.material.color = new THREE.Color('#ff0000')
        }
        if (e.code === "KeyT")
        {
            animate_t()
        }
        if (e.code === "KeyA")
        {
            animate_a()
        }
    }*/
    document.addEventListener("keydown",keyboard);//监视键盘的输入，可连续按
        function keyboard(event){
            var key = event.keyCode;
           
               if (key === 83)
               {
                    animate_s()
                }//'s'
               if ( key === 68){
                    animate_d()
               }//'d'
               if (key === 82){
                animate_r()
               }//'r'
               if(key === 84){
                animate_t()
               }//'t'
               if(key === 77){
                sphere.material.color = new THREE.Color('red');
                sphere2.material.color = new THREE.Color('red');
               }//'m'
               if(key === 65){
                 animate_a()
                }//'a'          
        }
   
</script>
</body>
</html>