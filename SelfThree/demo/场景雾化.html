<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>雾</title>
    <script src="./../build/three.js"></script>
    <script src="./../examples/js/libs/dat.gui.min.js"></script>
    <script src="./../examples/js/controls/OrbitControls.js"></script>
    <script src="./../examples/js/libs/stats.min.js"></script>
</head>
<body>
    <script>
        var renderer;
        function initRender()
        {
            renderer = new THREE.WebGLRenderer({antialias:true});
            renderer.setSize(window.innerWidth,window.innerHeight);
            renderer.setClearColor("Lightblue",1);
            document.body.appendChild(renderer.domElement);
        }

        var camera;
        function initCamera()
        {
           camera = new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1000);
           camera.position.set(30,20,60);
           camera.lookAt(new THREE.Vector3(0,0,0));
        }

        var scene;
        function initScene()
        {
            scene = new THREE.Scene();
            scene.fog = new THREE.Fog(0xffffff,40,50);
        }

        var light;
        function initLight()
        {
            light = new THREE.PointLight(0xffffff);
            light.position.set(60,30,20);
            light.castShadow = true;//告诉灯光我需要阴影
            scene.add(light);
        }


        var cube;
        function initModel()
        {
            var helper = new THREE.AxesHelper(20);
            scene.add(helper);

            var cubeGeometry = new THREE.BoxGeometry(10,10,10);
            var cubeMaterial = new THREE.MeshPhongMaterial({color:0xFF00FF,side:THREE.DoubleSide});
            cube = new THREE.Mesh(cubeGeometry,cubeMaterial);
            cube.position.set(0,5,0);
            scene.add(cube);
        }

        var gui,param;
        function initGui()
        {
            gui = new dat.GUI();
            param = {
                cubeX : 0,
                cubeY : 5,
                cubeZ : 0,
                color : "#FF00FF",
                v1 : 1,
                v2 : 1,
                v3 : 1
            };
            gui.add(param,"cubeX",-10,10);
            gui.add(param,"cubeY",-10,10);
            gui.add(param,"cubeZ",-10,10);
            gui.addColor(param,"color").onChange(e=>{
                cube.material.color = new THREE.Color(e);
            })
            gui.add(param,"v1",0.01,5);
            gui.add(param,"v2",0.01,5);
            gui.add(param,"v3",0.01,5);
        }

        var stats;
        function initStats()
        {
            stats = new Stats();
            document.body.appendChild(stats.dom);
        }

        var controls;
        function initControls()
        {
            controls = new THREE.OrbitControls(camera,renderer.domElement);
        }

        function render()
        {
            renderer.render(scene,camera);
        }

        function onWindowResize()
        {
            camera.aspect = window.innerWidth/window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth,window.innerHeight);
        }

        function animate()
        {
            //更新控制器
            render();
            //更新性能插件
            stats.update();
            //更新相关位置
            cube.position.x = param.cubeX;
            cube.position.y = param.cubeY;
            cube.position.z = param.cubeZ;
            cube.scale.set(param.v1,param.v2,param.v3);

            controls.update();
            requestAnimationFrame(animate);//请求桢动画
        }

        function draw()
        {
            initRender();
            initScene();
            initCamera();
            initModel();
            initLight();
            initControls();
            initGui();
            initStats();

            animate();
            window.onresize = onWindowResize;
        }

        draw();
    </script>
</body>
</html>