<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="../SelfThree/build/three.js"></script>
    <script src="../SelfThree/examples/js/controls/OrbitControls.js"></script>
    <script src="../SelfThree/examples/js/libs/dat.gui.min.js"></script>
    <script src="../SelfThree/examples/js/libs/stats.min.js"></script>
</head>
<body>
    <script>
        var renderer,scene,camera,light;
        var material,controls;
        var width,height;
        var geometry_2;
        width=window.innerWidth;
        height=window.innerHeight;
        var cube
        //创建渲染器
        renderer=new THREE.WebGLRenderer({antialias:true});//抗锯齿
        renderer.setClearColor("black");//相当于是场景背景色
        renderer.setSize(width,height);
        document.body.appendChild(renderer.domElement);
        //创建场景
        scene=new THREE.Scene();
        //创建相机
        camera=new THREE.PerspectiveCamera(60,width/height,1,1000);
        camera.position.set(0,20,30)
        camera.lookAt(0,0,0);
        //创建光源
        light=new THREE.DirectionalLight("#fff");
        light.position.set(200,300,400);
        scene.add(light);
        //创建控制器
        controls = new THREE.OrbitControls(camera, renderer.domElement);
        var stats=new Stats();
        document.body.appendChild(stats.dom);
        //创建helper
        var helper = new THREE.AxesHelper(100);
        scene.add(helper);
        //初始化dat.GUI
        var settings;
        var params;
        function initGui(){
            settings={
                scalex:1,
                scaley:1,
                scalez:1
            };
            params={
                color:"#ff0000"
            };
            //初始化gui
            var gui=new dat.GUI();
            //初始化体积gui
            var scale=gui.addFolder("scale");
            scale.add(settings,"scalex",0.01,5);
            scale.add(settings,"scaley",0.01,5);
            scale.add(settings,"scalez",0.01,5);
            //颜色gui
            gui.addColor(params,"color").onChange(e=>{
                geometry_2.material.color=new THREE.Color(e);
            })
            //onchange是回调函数
        };
        

        //创建十字架
         function initModel(){
             //创建竖立方体
             const geometry = new THREE.BufferGeometry();
             var points = [
            //体1（竖）
                 //体1前面
                    new THREE.Vector3(5, -15, 4),//v0
                    new THREE.Vector3(-5, 15, 4),//v2
                    new THREE.Vector3(-5, -15, 4),//v1
                    new THREE.Vector3(5, -15, 4),//v0
                    new THREE.Vector3(5, 15, 4),//v3
                    new THREE.Vector3(-5, 15, 4),//v2
                //体1右面
                    new THREE.Vector3(5, -15, -4),//v7
                    new THREE.Vector3(5, 15, 4),//v3
                    new THREE.Vector3(5, -15, 4),//v0
                    new THREE.Vector3(5, -15, -4),//v7
                    new THREE.Vector3(5, 15, -4),//v4
                    new THREE.Vector3(5, 15, 4),//v3
                //体1左面
                    new THREE.Vector3(-5, -15, 4),//v1
                    new THREE.Vector3(-5, 15, -4),//v5
                    new THREE.Vector3(-5, -15, -4),//v6
                    new THREE.Vector3(-5, -15, 4),//v1
                    new THREE.Vector3(-5, 15, 4),//v2
                    new THREE.Vector3(-5, 15, -4),//v5
                //体1后面
                    new THREE.Vector3(-5, -15, -4),//v6
                    new THREE.Vector3(5, 15, -4),//v4
                    new THREE.Vector3(5, -15, -4),//v7
                    new THREE.Vector3(-5, -15, -4),//v6
                    new THREE.Vector3(-5, 15, -4),//v5
                    new THREE.Vector3(5, 15, -4),//v4
                //体1上面
                    new THREE.Vector3(5, 15, 4),//v3
                    new THREE.Vector3(-5, 15, -4),//v5
                    new THREE.Vector3(-5, 15, 4),//v2
                    new THREE.Vector3(5, 15, 4),//v3
                    new THREE.Vector3(5, 15, -4),//v4
                    new THREE.Vector3(-5, 15, -4),//v5
                //体1下面
                    new THREE.Vector3(5, -15, -4),//v7
                    new THREE.Vector3(-5, -15, 4),//v1
                    new THREE.Vector3(-5, -15, -4),//v6 
                    new THREE.Vector3(5, -15, -4),//v7
                    new THREE.Vector3(5, -15, 4),//v0
                    new THREE.Vector3(-5, -15, 4),//v1


            //体2（横）
                //体2上面
                    new THREE.Vector3(10, 5, 4),//v3
                    new THREE.Vector3(-10, 5, -4),//v5
                    new THREE.Vector3(-10, 5, 4),//v0
                    new THREE.Vector3(10, 5, 4),//v3
                    new THREE.Vector3(10, 5, -4),//v4
                    new THREE.Vector3(-10, 5, -4),//v5
                //体2下面
                    new THREE.Vector3(10, -5, -4),//v7
                    new THREE.Vector3(-10, -5, 4),//v1
                    new THREE.Vector3(-10, -5, -4),//v6
                    new THREE.Vector3(10, -5, -4),//v7
                    new THREE.Vector3(10, -5, 4),//v2
                    new THREE.Vector3(-10, -5, 4),//v1
                //体2左边
                    new THREE.Vector3(-10, -5, 4),//v1
                    new THREE.Vector3(-10, 5, -4),//v5
                    new THREE.Vector3(-10, -5, -4),//v6
                    new THREE.Vector3(-10, -5, 4),//v1
                    new THREE.Vector3(-10, 5, 4),//v0
                    new THREE.Vector3(-10, 5, -4),//v5
                //体2右边
                    new THREE.Vector3(10, -5, -4),//v7
                    new THREE.Vector3(10, 5, 4),//v3
                    new THREE.Vector3(10, -5, 4),//v2
                    new THREE.Vector3(10, -5, -4),//v7
                    new THREE.Vector3(10, 5, -4),//v4
                    new THREE.Vector3(10, 5, 4),//v3
                //体2前面
                    new THREE.Vector3(10, -5, 4),//v2
                    new THREE.Vector3(-10, 5, 4),//v0
                    new THREE.Vector3(-10, -5, 4),//v1
                    new THREE.Vector3(10, -5, 4),//v2
                    new THREE.Vector3(10, 5, 4),//v3
                    new THREE.Vector3(-10, 5, 4),//v0
                //体2后面
                    new THREE.Vector3(-10, -5, -4),//v6
                    new THREE.Vector3(10, 5, -4),//v4
                    new THREE.Vector3(10, -5, -4),//v7
                    new THREE.Vector3(-10, -5, -4),//v6
                    new THREE.Vector3(-10, 5, -4),//v5
                    new THREE.Vector3(10, 5, -4),//v4
            
             ];
            let array = [];   
            points.forEach(e => {
                array.push(e.toArray())
                //console.log("e",e);
             });
            const newArray = new Float32Array(array.flat());
            geometry.setAttribute('position', new THREE.BufferAttribute(newArray, 3));//设置属性，position，color等

            //十字架
            var geometryMaterial= new THREE.MeshBasicMaterial({wireframe:true})//wireframe为是否开启线框
            geometry_2=new THREE.Mesh(geometry,geometryMaterial)
            scene.add(geometry_2);
         }
        initModel();
        initGui();
        function animate() {
            renderer.render(scene, camera);
            stats.update();//更新性能监测
            //更新gui
            geometry_2.scale.set(settings.scalex,settings.scaley,settings.scalez);
           // geometry_2.color.set(params.color);
            requestAnimationFrame(animate);//一秒钟调用60次，与电脑的配置有关 
        }
   
       // console.log(scene)
        animate()
        // window.onload = animate;
         
        
    </script>
</body>
</html>