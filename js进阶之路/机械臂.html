<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../build/three.js"></script>
    <script src="../examples/js/controls/OrbitControls.js"></script>
    <script src="../examples/js/libs/dat.gui.min.js"></script>
    <script src="../examples/js/libs/stats.min.js"></script>
</head>
<body>
<script>
    /**
     * @第一步模板
     * 1.渲染器
     * 2.场景
     * 3.相机
     * 4.灯光 可选
     * 5.模型 可选
     * 6.控制器 可选
     * 7.Stats 可选
     * 8.Gui 可选
     * 9.渲染函数
     */

    var width, height, renderer, scene, camera, light, geometry, material, gui, controls, box, BoxGroup, BoxGroup2,box2_rotation,plane,sphere, sphere2;//放在这，全部的函数都可以访问到
    width = window.innerWidth;
    height = window.innerHeight;
    // var sphereGeometry2
    //创建渲染器js进阶之路/机械臂.html
    renderer = new THREE.WebGLRenderer({antialias: true});//抗锯齿 可选
    renderer.setClearColor("green");
    renderer.setSize(width, height);
    document.body.appendChild(renderer.domElement);
    //创建场景
    scene = new THREE.Scene();
   // scene.overrideMaterial = new THREE.MeshStandardMaterial({color:0x00ffff});//场景内所以模型使用同一材质
    //创建相机
    camera = new THREE.PerspectiveCamera(60, width / height, 1, 1000);
    camera.position.set(6, 15, 30);//人拿着相机的位置
    camera.lookAt(0, 0, 0);//一个人拿着相机对着什么地方拍摄
    //创建光源(平行光)
    light = new THREE.DirectionalLight("#fff");
    light.position.set(200, 300, 400);
    scene.add(light);
    //创建控制器
     controls = new THREE.OrbitControls(camera, renderer.domElement);//是鼠标能只有移动视角
    //初始化性能插件
    // var stats;
    // function initStats() {
        var stats = new Stats();
        document.body.appendChild(stats.dom);
    //}


    //创建几何
    function initModel() {
        //创建gui
        //gui = new dat.GUI();
        var helper = new THREE.AxesHelper(100);
        scene.add(helper);
        //创建最底下的平面
        var planeGeometry = new THREE.PlaneGeometry(30, 10, 1, 1);
        var planeMaterial = new THREE.MeshStandardMaterial({color: "#0ddddd"})
        plane = new THREE.Mesh(planeGeometry, planeMaterial);
        plane.position.y = -5;
        plane.rotation.x = -0.5 * Math.PI;//数学库 ==》-90°
        scene.add(plane)
        //创建柱子
        var boxGeometry = new THREE.BoxGeometry(3, 10, 3)
        var boxMaterial = new THREE.MeshNormalMaterial({});
        box = new THREE.Mesh(boxGeometry, boxMaterial);
        box.position.set(0, 0, 0);
        scene.add(box)       
        //创建球体
        var sphereGeometry = new THREE.SphereGeometry(2, 32, 32);
        sphere = new THREE.Mesh(sphereGeometry, planeMaterial.clone());
        sphere.material.color = new THREE.Color('#00ffff')
        sphere.position.set(0,6.5,0);
        scene.add(sphere);
        //最上面的长方体
        box2_rotation = box.clone();
        box2_rotation.position.set(0, 6.2, 3);
        box2_rotation.rotation.x += Math.PI / 6;
        scene.add(box2_rotation);
        sphere.add(box2_rotation)
    }
    window.addEventListener("keyup", initEvent);//键盘点击事件
    function initEvent(e) {
        if (e.code === "KeyS"){
            //console.log("我进入了keys")
            sphere.rotation.x-=0.1;
        }
            
        else if (e.code === "KeyD"){
            //sphere.add(box2_rotation);
            sphere.rotation.y+=0.5;
        }
            
        else if (e.code === "KeyR"){
            plane.position.x += 10;
            sphere.position.x += 10;
            box.position.x += 10;
            }
        if (e.code === "KeyT"){
            //plane.rotation.y +=0.1;
            box.rotation.y +=0.2;
            sphere.rotation.y +=0.2;
            }
        if (e.code === "KeyM")
            sphere.material.color = new THREE.Color('#ff0000')
        if (e.code === "KeyA"){
            var sphereGeometry2 = new THREE.SphereGeometry(2, 32, 32);
            sphere2 = new THREE.Mesh(sphereGeometry2,sphere.material);
            sphere2.material.color = new THREE.Color('#00ffff')
            sphere2.position.copy(box.position);
            sphere2.position.y =3;
            sphere2.position.x +=15;    
        }
        scene.add(sphere2);
    }


    initModel();
    //渲染函数
    renderer.render(scene, camera);
    //什么叫做一帧图片
    //每调用一次，即相当于相机拍摄了一张照片，1秒拍摄了60张照片


    function animate() {
        renderer.render(scene, camera);
        requestAnimationFrame(animate);//一秒钟调用60次，与电脑的配置有关
        stats.update();//更新性能监测
    }
    window.onload = animate;
    //function initStats();
</script>
</body>
</html>